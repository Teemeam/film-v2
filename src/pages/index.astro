---
import Results from './Results';

const app_key = '5eb244406a33d48b10c1123269a7f5eb';
const photoset_id = '72157718780020052';
const user_id = '134442412@N06';

const response = await fetch(
  `https://www.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=${app_key}&photoset_id=${photoset_id}&user_id=${user_id}&format=json&nojsoncallback=1`
);

const data = await response.json();

const photos = data.photoset.photo;

let photoArray = [];

for (let i = 0; i < photos.length; i += 1) {
  photoArray.push(
	const infoResponse = await fetch(
		`https://www.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=${app_key}&photo_id=${photos[i].id}&format=json&nojsoncallback=1`
	);
  );
};
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<h1>Astro</h1>
		<Results client:load data={photoArray} />
	</body>
</html>
