---
import credentials from '../lib/credentials';

/* Components */
import App from './App';

/* Props */
const { data } = Astro.props;

/**
 * Complete data
 */
const photos = data.photoset.photo;

let completeData: CompleteData[] = [];

for (let i = 0; i < photos.length; i += 1) {
  const response = await fetch(
    `https://www.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=${credentials.app_key}&photo_id=${photos[i].id}&format=json&nojsoncallback=1`
  );
  const data = await response.json();
  completeData.push(data);
}
---

<App client:load data={completeData} />
